{"version":3,"sources":["actions/advericementAction.js","components/Advertisement.js","components/AdvertisementsList.js","components/FavouriteAdverticement.js","components/App.js","reducers/adverticementReducer.js","reducers/index.js","index.js"],"names":["ADD_FAVOURITE","addToFavourite","id","type","payload","Advertisement","state","btnClass","setFavourite","e","_this","props","product","num","_this$props","this","favourites","includes","react_default","a","createElement","className","lib","showThumbs","pictures","map","picture","i","src","key","title","onClick","concat","build_default","rating","seller_rating","starRatedColor","numberOfStars","name","price","Intl","NumberFormat","format","seller_name","React","Component","connect","advList","dispatch","bindActionCreators","advericementAction","AdvertisementsList","prices","selectedCategory","selectedSort","categoryOnChange","setState","target","value","sortOnChange","mapAdv","products","filter","p","sort","b","category","console","log","components_Advertisement","_this2","elems","document","querySelectorAll","options","slider","M","FormSelect","init","getElementById","sliderValues","noUiSlider","create","start","step","tooltips","range","min","max","on","values","handle","innerHTML","Object","objectSpread","_this3","react_router_dom","to","style","marginTop","position","top","ref","node","select","onChange","FavouriteAdverticement","componentWillMount","localStorage","renderFavAdv","f","process","App","sellers","Promise","all","url","fetch","then","j","json","data","seller","find","s","relationships","_this$state","basename","react_router","exact","path","component","components_AdvertisementsList","components_FavouriteAdverticement","localFavourites","getItem","JSON","parse","setItem","initialState","arguments","length","undefined","action","adverticementActions","findIndex","toConsumableArray","stringify","mainReducer","combineReducers","store","createStore","ReactDOM","render","es","components_App"],"mappings":"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","file":"static/js/main.24ad1e11.chunk.js","sourcesContent":["export const ADD_FAVOURITE = 'ADD_FAVOURITE'\r\n\r\nexport function addToFavourite(id){\r\n    return {\r\n        type: ADD_FAVOURITE,\r\n        payload: {id}\r\n    }\r\n}","import React from 'react'\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"\r\nimport { Carousel } from \"react-responsive-carousel\"\r\nimport \"../style.css\"\r\nimport StarRatings from \"react-star-ratings\"\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux'\r\n\r\nconst numPrettier = (num) => new Intl.NumberFormat().format(num) \r\n\r\nclass Advertisement extends React.Component{\r\n  state={btnClass:''}\r\n\r\n  setFavourite = (e) => {\r\n    this.props.addToFavourite(this.props.product.id)\r\n  }\r\n  render(){\r\n\r\n    const {product, favourites} = this.props\r\n    const btnClass = favourites.includes(product.id) ? 'btn-floating-favourite' : ''\r\n\r\n    return(\r\n        <article className=\"adverisements_advertisement advertisement row\">\r\n          <div className=\"col s12\">\r\n            <div className=\"card \">\r\n              <div className=\"card-image\">\r\n                <Carousel  showThumbs={false}>{product.pictures.map((picture, i)=><img src={picture} key={i}/>)}</Carousel>\r\n                <span className=\"advertisement_title card-title\">{product.title}</span>\r\n                <button className=\"btn-floating halfway-fab waves-effect waves-light \" onClick={this.setFavourite} id={this.props.product.id} ><i className={`fa fa-heart ${btnClass}`}></i></button>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <StarRatings rating={product.seller_rating} starRatedColor=\"gold\" numberOfStars={5} name='rating'/>         \r\n                <div className=\"advertisement_price\">{numPrettier(product.price)}₽</div>\r\n                <div className=\"advertisement_name\">{product.seller_name}</div>\r\n              </div>\r\n            </div>           \r\n          </div>\r\n        </article>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n      favourites: state.advList.favourites\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n  return {\r\n      addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Advertisement)","import React from 'react'\r\nimport Advertisement from './Advertisement';\r\nimport { Link } from 'react-router-dom'\r\nimport M from 'materialize-css/dist/js/materialize.min.js'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport noUiSlider from 'materialize-css/extras/noUiSlider/nouislider.js'\r\nimport 'materialize-css/extras/noUiSlider/nouislider.css'\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux'\r\n\r\nclass AdvertisementsList extends React.Component {\r\n\r\n   state={\r\n       prices:[0, 1000000],\r\n       selectedCategory: 'any',\r\n       selectedSort: 'price',\r\n    }\r\n\r\n    componentDidMount(){\r\n        const elems = document.querySelectorAll('select')\r\n        const options = document.querySelectorAll('option')\r\n        let instances = M.FormSelect.init(elems, options)\r\n         \r\n        const slider = document.getElementById('priceSlider')\r\n        let sliderValues =[ \r\n            document.getElementById('lower-price'),\r\n            document.getElementById('upper-price')\r\n        ]\r\n        noUiSlider.create(slider, {\r\n            start: [0, 100000],\r\n            connect: true,\r\n            step: 100,\r\n            tooltips: false,\r\n            range: {\r\n                'min': 0,\r\n                'max': 100000\r\n            }\r\n        })\r\n        slider.noUiSlider.on('change', (values,handle)=>{\r\n            var prices = this.state.prices\r\n            prices[handle] = values[handle]\r\n            sliderValues[handle].innerHTML = values[handle]\r\n            this.setState({...prices})\r\n\r\n        })\r\n    }\r\n\r\n    categoryOnChange = (e) => {\r\n        this.setState({selectedCategory: e.target.value})\r\n    }\r\n\r\n    sortOnChange = (e) => {\r\n        this.setState({selectedSort: e.target.value})\r\n    }\r\n\r\n    mapAdv = () => {\r\n\r\n        let {products} = this.props\r\n        let {prices} = this.state\r\n        const {favourites} = this.props\r\n\r\n        products = products.filter(p => {\r\n            let price = p.price || ''\r\n            return price>=prices[0] && price<=prices[1]\r\n        })\r\n        if (this.state.selectedSort === 'price')\r\n            products = products.sort((a,b) => {\r\n                if (a.price > b.price)\r\n                    return 1\r\n\r\n                if (a.price < b.price)\r\n                    return -1\r\n\r\n                return 0\r\n            })\r\n        else if (this.state.selectedSort === 'rating')\r\n        products = products.sort((a,b)=>{\r\n            if( a.seller_rating < b.seller_rating )\r\n                return 1\r\n            if ( a.seller_rating > b.seller_rating )\r\n                return -1\r\n            return 0\r\n        }) \r\n        \r\n        if (this.state.selectedCategory !== \"any\"){\r\n            products = products.filter(p=>{\r\n                let category = p.category\r\n                console.log(category)\r\n                return category === this.state.selectedCategory\r\n            })\r\n        }\r\n\r\n        return products.map((product, key)=><Advertisement addToFavourite = {this.props.addToFavourite} product={product} key={key}/>)\r\n   }\r\n\r\n   render(){\r\n    return <section>\r\n        <Link to='/favourite'><i className=\"fa fa-heart\"></i></Link>\r\n        <header className=\"filter row\">\r\n            <form className=\"col s12\"> \r\n            <div className=\"input-field col s12 l6\" style={{marginTop: \"3.7rem\"}}>  \r\n                <label style={{position: \"absolute\", top: \"-68px\"}}>Цена</label>\r\n                <div id=\"priceSlider\"></div> \r\n\r\n                <div className=\"col s3 l2 left-align\">\r\n                    <span id=\"lower-price\"></span>\r\n                </div>\r\n                <div className=\"col s3 l2 offset-l8 offset-s6 right-align\">\r\n                    <span id=\"upper-price\"></span> \r\n                </div> \r\n            </div> \r\n\r\n            <div className=\"input-field col l3 s12\">\r\n   <select name=\"category\" \r\n        value={this.state.selectedCategory} \r\n        ref={node=>{this.select = node}} \r\n        onChange={this.categoryOnChange}>\r\n                    <option value=\"any\">любая категория</option>\r\n                    <option value=\"immovable\">недвижимость</option>\r\n                    <option value=\"cameras\">камеры</option>\r\n                    <option value=\"auto\">автомобили</option>\r\n                    <option value=\"laptops\">ноутбуки</option>\r\n                </select>\r\n                <label>Категория</label>\r\n            </div>   \r\n\r\n            <div className=\"input-field col s12 l3\">\r\n                <select name=\"sort\" value={this.state.selectedSort} onChange={this.sortOnChange}>\r\n                    <option value=\"rating\">по популярности</option>\r\n                    <option value=\"price\">по возрастанию цены</option>\r\n                </select>\r\n                <label>Сортировка</label>\r\n            </div>\r\n            </form>\r\n        </header>\r\n        <section className=\"advertisements container\">\r\n            {this.mapAdv()}\r\n        </section>\r\n    </section>\r\n   }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        favourites: state.advList.favourites\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n    return {\r\n        addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdvertisementsList)\r\n","import React from 'react'\r\nimport Advertisement from './Advertisement'\r\nimport { Link } from 'react-router-dom'\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\n\r\nclass FavouriteAdverticement extends React.Component{\r\n    state = {products:[]}\r\n    componentWillMount = () => {\r\n        this.setState( { products: { ...localStorage } } )\r\n    }\r\n    renderFavAdv = () => {\r\n        let favourites = this.props.products.filter(p => this.props.favourites.includes(p.id))\r\n    \r\n        return favourites.map((f, i) => { return <Advertisement key={i} btnClass=\"btn-floating-favourite\" product={f} /> })\r\n    }\r\n    render(){\r\n        return  <div>\r\n            <Link to={process.env.PUBLIC_URL}><i className=\"fa fa-home\"></i></Link>\r\n            {this.renderFavAdv()}\r\n        </div>\r\n        \r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        favourites: state.advList.favourites\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n    return {\r\n        addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FavouriteAdverticement)","import React from 'react'\r\nimport '../App.css'\r\nimport 'materialize-css'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport AdvertisementsList from './AdvertisementsList.js'\r\nimport FavouriteAdverticement from './FavouriteAdverticement.js'\r\nimport { Route, HashRouter } from 'react-router-dom'\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    products:[],\r\n    sellers:[]\r\n  }\r\n\r\n  componentWillMount(){\r\n    Promise.all(['https://my-json-server.typicode.com/darinapairel/avitotest/sellers', 'https://my-json-server.typicode.com/darinapairel/avitotest/products'].map(url => fetch(url).then(j => j.json()) )) //https://avito.dump.academy/products\r\n    .then(data=>{\r\n      \r\n      let sellers = data[0]\r\n      let products = data[1]\r\n      console.log(data)\r\n      products = products.map(p => {\r\n        let seller = sellers.find(s => s.id === p.relationships.seller) || {name: '', rating: 0}\r\n        return {...p, seller_name: seller.name, seller_rating: seller.rating}\r\n      })\r\n\r\n      this.setState({...this.state, products, sellers})\r\n\r\n    })\r\n}\r\n  render(){\r\n    const {sellers, products} = this.state\r\n    const advList = () => <AdvertisementsList sellers={sellers} products={products}/>\r\n    const favAdv = () => <FavouriteAdverticement products={products}/>\r\n  return (\r\n    <div className=\"App container\">\r\n      <HashRouter basename={process.env.PUBLIC_URL}>\r\n      <div>\r\n        <Route exact path=\"/\" component={advList}/>\r\n        <Route exact path='/favourite' component={favAdv}/>        \r\n      </div>\r\n      </HashRouter> \r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default App;\r\n","import * as adverticementActions from '../actions/advericementAction'\r\n\r\nlet localFavourites = localStorage.getItem('favourites')\r\n\r\nif (!localFavourites){\r\n    localStorage.setItem('favourites', [])\r\n} else{\r\n    localFavourites = JSON.parse(localFavourites)\r\n}\r\n\r\nconst initialState = {\r\n    favourites: localFavourites\r\n}\r\n\r\nconst advList = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case adverticementActions.ADD_FAVOURITE:\r\n\r\n            const {id} = action.payload\r\n            const idx = state.favourites.findIndex(f => f === id)\r\n            const favourites = idx === -1 ? [...state.favourites, id] : state.favourites\r\n            \r\n            localStorage.setItem('favourites', JSON.stringify(favourites))\r\n\r\n            return {...state, favourites}\r\n\r\n        default: return state    \r\n    }\r\n   \r\n}\r\n\r\nexport default advList\r\n","import { combineReducers } from 'redux'\r\nimport advList from './adverticementReducer'\r\n\r\nconst mainReducer = combineReducers({advList})\r\n\r\nexport default mainReducer","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport mainReducer from './reducers';\r\n\r\n\r\nconst store = createStore(mainReducer, {advList: {favourites: []}})\r\nReactDOM.render(\r\n    <Provider store= {store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}