{"version":3,"sources":["actions/advericementAction.js","components/Advertisement.js","components/AdvertisementsList.js","components/FavouriteAdverticement.js","components/App.js","reducers/adverticementReducer.js","reducers/index.js","index.js"],"names":["ADD_FAVOURITE","addToFavourite","id","type","payload","Advertisement","state","btnClass","setFavourite","e","_this","props","product","_this$props","this","favourites","includes","react_default","a","createElement","className","lib","showThumbs","pictures","map","picture","i","src","key","title","onClick","concat","build_default","rating","seller_rating","starRatedColor","numberOfStars","name","num","String","Number","isInteger","length","split","join","j","substr","replace","numPrettier","price","seller_name","React","Component","connect","advList","dispatch","bindActionCreators","advericementAction","AdvertisementsList","prices","selectedCategory","selectedSort","categoryOnChange","setState","target","value","sortOnChange","mapAdv","products","filter","p","sort","b","category","components_Advertisement","_this2","elems","document","querySelectorAll","options","slider","M","FormSelect","init","getElementById","sliderValues","noUiSlider","create","start","step","tooltips","range","min","max","on","values","handle","innerHTML","Object","objectSpread","_this3","react_router_dom","to","style","marginTop","position","top","ref","node","select","onChange","FavouriteAdverticement","componentWillMount","localStorage","renderFavAdv","f","App","sellers","Promise","all","url","fetch","then","json","data","console","log","seller","find","s","relationships","_this$state","react_router","exact","path","component","components_AdvertisementsList","components_FavouriteAdverticement","localFavourites","getItem","JSON","parse","setItem","initialState","arguments","undefined","action","adverticementActions","findIndex","toConsumableArray","stringify","mainReducer","combineReducers","store","createStore","ReactDOM","render","es","components_App"],"mappings":"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","file":"static/js/main.8fb0e315.chunk.js","sourcesContent":["export const ADD_FAVOURITE = 'ADD_FAVOURITE'\r\n\r\nexport function addToFavourite(id){\r\n    return {\r\n        type: ADD_FAVOURITE,\r\n        payload: {id}\r\n    }\r\n}","import React from 'react'\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"\r\nimport { Carousel } from \"react-responsive-carousel\"\r\nimport \"../style.css\"\r\nimport StarRatings from \"react-star-ratings\"\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux'\r\n\r\nconst numPrettier = (num)=>{\r\n  if (num){ \r\n    num = String(num)\r\n    if(Number.isInteger(num.length/3)){\r\n      return num.split(/(\\d{3})/).join(\" \")\r\n    }else{\r\n      let j = num.length\r\n      j = num.length > 3 ? j % 3 : 0 \r\n      \r\n      return j ? num.substr(0, j) + \" \" : \"\" + num.substr(j).replace(/(\\d{3})(?=\\d)/g, \" \")\r\n    }\r\n  }else{\r\n    return null\r\n  }  \r\n}\r\n\r\nclass Advertisement extends React.Component{\r\n  state={btnClass:''}\r\n\r\n  setFavourite = (e) => {\r\n    this.props.addToFavourite(this.props.product.id)\r\n  }\r\n  render(){\r\n\r\n    const {product, favourites} = this.props\r\n    const btnClass = favourites.includes(product.id) ? 'btn-floating-favourite' : ''\r\n\r\n    return(\r\n        <article className=\"adverisements_advertisement advertisement row\">\r\n          <div className=\"col s12\">\r\n            <div className=\"card \">\r\n              <div className=\"card-image\">\r\n                <Carousel  showThumbs={false}>{product.pictures.map((picture, i)=><img src={picture} key={i}/>)}</Carousel>\r\n                <span className=\"advertisement_title card-title\">{product.title}</span>\r\n                <button className=\"btn-floating halfway-fab waves-effect waves-light \" onClick={this.setFavourite} id={this.props.product.id} ><i className={`fa fa-heart ${btnClass}`}></i></button>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <StarRatings rating={product.seller_rating} starRatedColor=\"gold\" numberOfStars={5} name='rating'/>         \r\n                <div className=\"advertisement_price\">{numPrettier(product.price)}₽</div>\r\n                <div className=\"advertisement_name\">{product.seller_name}</div>\r\n              </div>\r\n            </div>           \r\n          </div>\r\n        </article>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n      favourites: state.advList.favourites\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n  return {\r\n      addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Advertisement)","import React from 'react'\r\nimport Advertisement from './Advertisement';\r\nimport { Link } from 'react-router-dom'\r\nimport M from 'materialize-css/dist/js/materialize.min.js'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport noUiSlider from 'materialize-css/extras/noUiSlider/nouislider.js'\r\nimport 'materialize-css/extras/noUiSlider/nouislider.css'\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux'\r\n\r\nclass AdvertisementsList extends React.Component {\r\n\r\n   state={\r\n       prices:[0, 1000000],\r\n       selectedCategory: 'any',\r\n       selectedSort: 'price',\r\n    }\r\n\r\n    componentDidMount(){\r\n        const elems = document.querySelectorAll('select')\r\n        const options = document.querySelectorAll('option')\r\n        let instances = M.FormSelect.init(elems, options)\r\n         \r\n        const slider = document.getElementById('priceSlider')\r\n        let sliderValues =[ \r\n            document.getElementById('lower-price'),\r\n            document.getElementById('upper-price')\r\n        ]\r\n        noUiSlider.create(slider, {\r\n            start: [0, 3000000],\r\n            connect: true,\r\n            step: 100,\r\n            tooltips: false,\r\n            range: {\r\n                'min': 0,\r\n                'max': 3000000\r\n            }\r\n        })\r\n        slider.noUiSlider.on('change', (values,handle)=>{\r\n            var prices = this.state.prices\r\n            prices[handle] = values[handle]\r\n            sliderValues[handle].innerHTML = values[handle]\r\n            this.setState({...prices})\r\n\r\n        })\r\n    }\r\n\r\n    categoryOnChange = (e) => {\r\n        this.setState({selectedCategory: e.target.value})\r\n    }\r\n\r\n    sortOnChange = (e) => {\r\n        this.setState({selectedSort: e.target.value})\r\n    }\r\n\r\n    mapAdv = () => {\r\n\r\n        let {products} = this.props\r\n        let {prices} = this.state\r\n        const {favourites} = this.props\r\n\r\n        products = products.filter(p => {\r\n            let price = p.price || ''\r\n            return price>=prices[0] && price<=prices[1]\r\n        })\r\n        if (this.state.selectedSort === 'price')\r\n            products = products.sort((a,b)=>{\r\n                if (a.price > b.price)\r\n                    return 1\r\n\r\n                if (a.price < b.price)\r\n                    return -1\r\n\r\n                return 0\r\n            })\r\n        else if (this.state.selectedSort === 'rating')\r\n        products = products.sort((a,b)=>{\r\n            if( a.seller_rating < b.seller_rating )\r\n                return 1\r\n            if ( a.seller_rating > b.seller_rating )\r\n                return -1\r\n            return 0\r\n        }) \r\n        \r\n        if (this.state.selectedCategory !== \"any\"){\r\n            products = products.filter(p=>{\r\n                let category = p.category\r\n                return category === this.state.selectedCategory\r\n            })\r\n        }\r\n\r\n        return products.map((product, key)=><Advertisement addToFavourite = {this.props.addToFavourite} product={product} key={key}/>)\r\n   }\r\n\r\n   render(){\r\n    return <section>\r\n        <Link to='/favourite'><i className=\"fa fa-heart\"></i></Link>\r\n        <header className=\"filter row\">\r\n            <form className=\"col s12\"> \r\n            <div className=\"input-field col s12 l6\" style={{marginTop: \"3.7rem\"}}>  \r\n                <label style={{position: \"absolute\", top: \"-68px\"}}>Цена</label>\r\n                <div id=\"priceSlider\"></div> \r\n\r\n                <div className=\"col s3 l2 left-align\">\r\n                    <span id=\"lower-price\"></span>\r\n                </div>\r\n                <div className=\"col s3 l2 offset-l8 offset-s6 right-align\">\r\n                    <span id=\"upper-price\"></span> \r\n                </div> \r\n            </div> \r\n\r\n            <div className=\"input-field col l3 s12\">\r\n   <select name=\"category\" \r\n        value={this.state.selectedCategory} \r\n        ref={node=>{this.select = node}} \r\n        onChange={ ()=>\r\n            // this.select.value\r\n        \r\n       this.categoryOnChange\r\n       }>\r\n                    <option value=\"any\">любая категория</option>\r\n                    <option value=\"immovable\">недвижимость</option>\r\n                    <option value=\"cameras\">камеры</option>\r\n                    <option value=\"auto\">автомобили</option>\r\n                    <option value=\"laptops\">ноутбуки</option>\r\n                </select>\r\n                <label>Категория</label>\r\n            </div>   \r\n\r\n            <div className=\"input-field col s12 l3\">\r\n                <select name=\"sort\" value={this.state.selectedSort} onChange={this.sortOnChange}>\r\n                    <option value=\"rating\">по популярности</option>\r\n                    <option value=\"price\">по возрастанию цены</option>\r\n                </select>\r\n                <label>Сортировка</label>\r\n            </div>\r\n            </form>\r\n        </header>\r\n        <section className=\"advertisements container\">\r\n            {this.mapAdv()}\r\n        </section>\r\n    </section>\r\n   }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        favourites: state.advList.favourites\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n    return {\r\n        addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdvertisementsList)\r\n","import React from 'react'\r\nimport Advertisement from './Advertisement'\r\nimport { Link } from 'react-router-dom'\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\n\r\nclass FavouriteAdverticement extends React.Component{\r\n    state = {products:[]}\r\n    componentWillMount = () => {\r\n        this.setState( { products: { ...localStorage } } )\r\n    }\r\n    renderFavAdv = () => {\r\n        let favourites = this.props.products.filter(p => this.props.favourites.includes(p.id))\r\n    \r\n        return favourites.map((f, i) => { return <Advertisement key={i} btnClass=\"btn-floating-favourite\" product={f} /> })\r\n    }\r\n    render(){\r\n        return  <div>\r\n            <Link to=\"/\"><i className=\"fa fa-home\"></i></Link>\r\n            {this.renderFavAdv()}\r\n        </div>\r\n        \r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        favourites: state.advList.favourites\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n    return {\r\n        addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FavouriteAdverticement)","import React from 'react'\r\nimport '../App.css'\r\nimport 'materialize-css'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport AdvertisementsList from './AdvertisementsList.js'\r\nimport FavouriteAdverticement from './FavouriteAdverticement.js'\r\nimport { Route, BrowserRouter } from 'react-router-dom'\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    products:[],\r\n    sellers:[]\r\n  }\r\n\r\n  componentWillMount(){\r\n    Promise.all(['https://my-json-server.typicode.com/darinapairel/avitotest/sellers', 'https://my-json-server.typicode.com/darinapairel/avitotest/products'].map(url => fetch(url).then(j => j.json()) )) //https://avito.dump.academy/products\r\n    .then(data=>{\r\n      \r\n      let sellers = data[0]\r\n      let products = data[1]\r\n      console.log(data)\r\n      products = products.map(p => {\r\n        let seller = sellers.find(s => s.id === p.relationships.seller) || {name: '', rating: 0}\r\n        return {...p, seller_name: seller.name, seller_rating: seller.rating}\r\n      })\r\n\r\n      this.setState({...this.state, products, sellers})\r\n\r\n    })\r\n}\r\n  render(){\r\n    const {sellers, products} = this.state\r\n    const advList = () => <AdvertisementsList sellers={sellers} products={products}/>\r\n    const favAdv = () => <FavouriteAdverticement products={products}/>\r\n  return (\r\n    <div className=\"App container\">\r\n      <BrowserRouter>\r\n      <div>\r\n        <Route exact path=\"/\" component={advList}/>\r\n        <Route exact path='/favourite' component={favAdv}/>        \r\n      </div>\r\n      </BrowserRouter> \r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default App;\r\n","import * as adverticementActions from '../actions/advericementAction'\r\n\r\nlet localFavourites = localStorage.getItem('favourites')\r\n\r\nif (!localFavourites){\r\n    localStorage.setItem('favourites', [])\r\n} else{\r\n    localFavourites = JSON.parse(localFavourites)\r\n}\r\n\r\nconst initialState = {\r\n    favourites: localFavourites\r\n}\r\n\r\nconst advList = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case adverticementActions.ADD_FAVOURITE:\r\n\r\n            const {id} = action.payload\r\n            const idx = state.favourites.findIndex(f => f === id)\r\n            const favourites = idx === -1 ? [...state.favourites, id] : state.favourites\r\n            \r\n            localStorage.setItem('favourites', JSON.stringify(favourites))\r\n\r\n            return {...state, favourites}\r\n\r\n        default: return state    \r\n    }\r\n   \r\n}\r\n\r\nexport default advList\r\n","import { combineReducers } from 'redux'\r\nimport advList from './adverticementReducer'\r\n\r\nconst mainReducer = combineReducers({advList})\r\n\r\nexport default mainReducer","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport mainReducer from './reducers';\r\n\r\n\r\nconst store = createStore(mainReducer, {advList: {favourites: []}})\r\nReactDOM.render(\r\n    <Provider store= {store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}