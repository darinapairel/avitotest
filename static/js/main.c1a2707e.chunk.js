(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(65)},52:function(e,t,a){},53:function(e,t,a){},60:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),l=a.n(c),o=a(17),i=a(8),s=(a(52),a(6)),u=a(9),m=a(10),p=a(12),d=a(11),v=a(13),f=(a(53),a(54),a(27),a(55),a(36)),g=(a(60),a(37)),E=a.n(g),h=(a(33),"ADD_FAVOURITE");function b(e){return{type:h,payload:{id:e}}}var y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={btnClass:""},a.setFavourite=function(e){a.props.addToFavourite(a.props.product.id)},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.product,r=t.favourites.includes(a.id)?"btn-floating-favourite":"";return n.a.createElement("article",{className:"adverisements_advertisement advertisement row"},n.a.createElement("div",{className:"col s12"},n.a.createElement("div",{className:"card "},n.a.createElement("div",{className:"card-image"},n.a.createElement(f.Carousel,{showThumbs:!1},a.pictures.map(function(e,t){return n.a.createElement("img",{src:e,key:t,alt:"pic#".concat(t)})})),n.a.createElement("span",{className:"advertisement_title card-title"},a.title),n.a.createElement("button",{className:"btn-floating halfway-fab waves-effect waves-light ",onClick:this.setFavourite,id:this.props.product.id},n.a.createElement("i",{className:"fa fa-heart ".concat(r)}))),n.a.createElement("div",{className:"card-content"},n.a.createElement(E.a,{rating:a.seller_rating,starRatedColor:"gold",numberOfStars:5,name:"rating"}),n.a.createElement("div",{className:"advertisement_price"},(e=a.price,(new Intl.NumberFormat).format(e)),"\u20bd"),n.a.createElement("div",{className:"advertisement_name"},a.seller_name)))))}}]),t}(n.a.Component);var O=Object(o.b)(function(e){return{favourites:e.advList.favourites}},function(e){return{addToFavourite:Object(i.a)(b,e)}})(y),j=a(16),N=a(38),S=a.n(N),w=a(39),C=a.n(w),A=(a(63),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={prices:[0,1e6],selectedCategory:"any",selectedSort:"price"},a.categoryOnChange=function(e){a.setState({selectedCategory:e.target.value})},a.sortOnChange=function(e){a.setState({selectedSort:e.target.value})},a.mapAdv=function(){var e=a.props.products,t=a.state.prices;return e=e.filter(function(e){var a=e.price||"";return a>=t[0]&&a<=t[1]}),"price"===a.state.selectedSort?e=e.sort(function(e,t){return e.price>t.price?1:e.price<t.price?-1:0}):"rating"===a.state.selectedSort&&(e=e.sort(function(e,t){return e.seller_rating<t.seller_rating?1:e.seller_rating>t.seller_rating?-1:0})),"any"!==a.state.selectedCategory&&(e=e.filter(function(e){return e.category===a.state.selectedCategory})),e.map(function(e,t){return n.a.createElement(O,{product:e,key:t})})},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelectorAll("select"),a=document.querySelectorAll("option"),r=(S.a.FormSelect.init(t,a),document.getElementById("priceSlider")),n=[document.getElementById("lower-price"),document.getElementById("upper-price")];C.a.create(r,{start:[0,1e5],connect:!0,step:100,tooltips:!1,range:{min:0,max:1e5}}),r.noUiSlider.on("change",function(t,a){var r=e.state.prices;r[a]=t[a],n[a].innerHTML=t[a],e.setState(Object(s.a)({},r))})}},{key:"render",value:function(){var e=this;return n.a.createElement("section",null,n.a.createElement(j.b,{to:"/favourite"},n.a.createElement("i",{className:"fa fa-heart"})),n.a.createElement("header",{className:"filter row"},n.a.createElement("form",{className:"col s12"},n.a.createElement("div",{className:"input-field col s12 l6",style:{marginTop:"3.7rem"}},n.a.createElement("label",{style:{position:"absolute",top:"-68px"}},"\u0426\u0435\u043d\u0430"),n.a.createElement("div",{id:"priceSlider"}),n.a.createElement("div",{className:"col s3 l2 left-align"},n.a.createElement("span",{id:"lower-price"})),n.a.createElement("div",{className:"col s3 l2 offset-l8 offset-s6 right-align"},n.a.createElement("span",{id:"upper-price"}))),n.a.createElement("div",{className:"input-field col l3 s12"},n.a.createElement("select",{name:"category",value:this.state.selectedCategory,ref:function(t){e.select=t},onChange:this.categoryOnChange},n.a.createElement("option",{value:"any"},"\u043b\u044e\u0431\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),n.a.createElement("option",{value:"immovable"},"\u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c"),n.a.createElement("option",{value:"cameras"},"\u043a\u0430\u043c\u0435\u0440\u044b"),n.a.createElement("option",{value:"auto"},"\u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438"),n.a.createElement("option",{value:"laptops"},"\u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0438")),n.a.createElement("label",null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f")),n.a.createElement("div",{className:"input-field col s12 l3"},n.a.createElement("select",{name:"sort",value:this.state.selectedSort,onChange:this.sortOnChange},n.a.createElement("option",{value:"rating"},"\u043f\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438"),n.a.createElement("option",{value:"price"},"\u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b")),n.a.createElement("label",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430")))),n.a.createElement("section",{className:"advertisements container"},this.mapAdv()))}}]),t}(n.a.Component)),_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={products:[]},a.componentWillMount=function(){a.setState({products:Object(s.a)({},localStorage)})},a.renderFavAdv=function(){return a.props.products.filter(function(e){return a.props.favourites.includes(e.id)}).map(function(e,t){return n.a.createElement(O,{key:t,btnClass:"btn-floating-favourite",product:e})})},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(j.b,{to:"/avitotest"},n.a.createElement("i",{className:"fa fa-home"})),this.renderFavAdv())}}]),t}(n.a.Component);var k=Object(o.b)(function(e){return{favourites:e.advList.favourites}})(_),I=a(14),F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={products:[],sellers:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this;Promise.all(["https://my-json-server.typicode.com/darinapairel/avitotest/sellers","https://my-json-server.typicode.com/darinapairel/avitotest/products"].map(function(e){return fetch(e).then(function(e){return e.json()})})).then(function(t){var a=t[0],r=t[1];r=r.map(function(e){var t=a.find(function(t){return t.id===e.relationships.seller})||{name:"",rating:0};return Object(s.a)({},e,{seller_name:t.name,seller_rating:t.rating})}),e.setState(Object(s.a)({},e.state,{products:r,sellers:a}))})}},{key:"render",value:function(){var e=this.state,t=e.sellers,a=e.products;return n.a.createElement("div",{className:"App container"},n.a.createElement(j.a,{basename:"/avitotest"},n.a.createElement("div",null,n.a.createElement(I.a,{exact:!0,path:"/",component:function(){return n.a.createElement(A,{sellers:t,products:a})}}),n.a.createElement(I.a,{exact:!0,path:"/favourite",component:function(){return n.a.createElement(k,{products:a})}}))))}}]),t}(n.a.Component),x=a(41),T=localStorage.getItem("favourites");T?T=JSON.parse(T):localStorage.setItem("favourites",[]);var L={favourites:T},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var a=t.payload.id,r=-1===e.favourites.findIndex(function(e){return e===a})?[].concat(Object(x.a)(e.favourites),[a]):e.favourites;return localStorage.setItem("favourites",JSON.stringify(r)),Object(s.a)({},e,{favourites:r});default:return e}},J=Object(i.b)({advList:B}),M=Object(i.c)(J,{advList:{favourites:[]}});l.a.render(n.a.createElement(o.a,{store:M},n.a.createElement(F,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c1a2707e.chunk.js.map