{"version":3,"sources":["actions/advericementAction.js","components/Advertisement.js","components/AdvertisementsList.js","components/FavouriteAdverticement.js","components/App.js","reducers/adverticementReducer.js","reducers/index.js","index.js"],"names":["ADD_FAVOURITE","addToFavourite","id","type","payload","Advertisement","state","btnClass","setFavourite","e","_this","props","product","num","_this$props","this","favourites","includes","react_default","a","createElement","className","lib","showThumbs","pictures","map","picture","i","src","key","alt","concat","title","onClick","build_default","rating","seller_rating","starRatedColor","numberOfStars","name","price","Intl","NumberFormat","format","seller_name","React","Component","connect","advList","dispatch","bindActionCreators","advericementAction","AdvertisementsList","prices","selectedCategory","selectedSort","categoryOnChange","setState","target","value","sortOnChange","mapAdv","products","filter","p","sort","b","category","components_Advertisement","_this2","elems","document","querySelectorAll","options","slider","M","FormSelect","init","getElementById","sliderValues","noUiSlider","create","start","step","tooltips","range","min","max","on","values","handle","innerHTML","Object","objectSpread","_this3","react_router_dom","to","style","marginTop","position","top","ref","node","select","onChange","FavouriteAdverticement","componentWillMount","localStorage","renderFavAdv","f","process","App","sellers","Promise","all","url","fetch","then","j","json","data","seller","find","s","relationships","_this$state","basename","react_router","exact","path","component","components_AdvertisementsList","components_FavouriteAdverticement","localFavourites","getItem","JSON","parse","setItem","initialState","arguments","length","undefined","action","adverticementActions","findIndex","toConsumableArray","stringify","mainReducer","combineReducers","store","createStore","ReactDOM","render","es","components_App"],"mappings":"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","file":"static/js/main.c1a2707e.chunk.js","sourcesContent":["export const ADD_FAVOURITE = 'ADD_FAVOURITE'\r\n\r\nexport function addToFavourite(id){\r\n    return {\r\n        type: ADD_FAVOURITE,\r\n        payload: {id}\r\n    }\r\n}","import React from 'react'\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"\r\nimport { Carousel } from \"react-responsive-carousel\"\r\nimport \"../style.css\"\r\nimport StarRatings from \"react-star-ratings\"\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\nimport * as advericementAction from '../actions/advericementAction'\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux'\r\n\r\nconst numPrettier = (num) => new Intl.NumberFormat().format(num) \r\n\r\nclass Advertisement extends React.Component{\r\n  state={btnClass:''}\r\n\r\n  setFavourite = (e) => {\r\n    this.props.addToFavourite(this.props.product.id)\r\n  }\r\n  render(){\r\n\r\n    const {product, favourites} = this.props\r\n    const btnClass = favourites.includes(product.id) ? 'btn-floating-favourite' : ''\r\n\r\n    return(\r\n        <article className=\"adverisements_advertisement advertisement row\">\r\n          <div className=\"col s12\">\r\n            <div className=\"card \">\r\n              <div className=\"card-image\">\r\n                <Carousel  showThumbs={false}>{product.pictures.map((picture, i)=><img src={picture} key={i} alt={`pic#${i}`} />)}</Carousel>\r\n                <span className=\"advertisement_title card-title\">{product.title}</span>\r\n                <button className=\"btn-floating halfway-fab waves-effect waves-light \" onClick={this.setFavourite} id={this.props.product.id} ><i className={`fa fa-heart ${btnClass}`}></i></button>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <StarRatings rating={product.seller_rating} starRatedColor=\"gold\" numberOfStars={5} name='rating'/>         \r\n                <div className=\"advertisement_price\">{numPrettier(product.price)}₽</div>\r\n                <div className=\"advertisement_name\">{product.seller_name}</div>\r\n              </div>\r\n            </div>           \r\n          </div>\r\n        </article>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n      favourites: state.advList.favourites\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n  return {\r\n      addToFavourite: bindActionCreators(advericementAction.addToFavourite, dispatch)\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Advertisement)","import React from 'react'\r\nimport Advertisement from './Advertisement';\r\nimport { Link } from 'react-router-dom'\r\nimport M from 'materialize-css/dist/js/materialize.min.js'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport noUiSlider from 'materialize-css/extras/noUiSlider/nouislider.js'\r\nimport 'materialize-css/extras/noUiSlider/nouislider.css'\r\n\r\nclass AdvertisementsList extends React.Component {\r\n\r\n   state={\r\n       prices:[0, 1000000],\r\n       selectedCategory: 'any',\r\n       selectedSort: 'price',\r\n    }\r\n\r\n    componentDidMount(){\r\n        const elems = document.querySelectorAll('select')\r\n        const options = document.querySelectorAll('option')\r\n        let instances = M.FormSelect.init(elems, options)\r\n         \r\n        const slider = document.getElementById('priceSlider')\r\n        let sliderValues =[ \r\n            document.getElementById('lower-price'),\r\n            document.getElementById('upper-price')\r\n        ]\r\n        noUiSlider.create(slider, {\r\n            start: [0, 100000],\r\n            connect: true,\r\n            step: 100,\r\n            tooltips: false,\r\n            range: {\r\n                'min': 0,\r\n                'max': 100000\r\n            }\r\n        })\r\n        slider.noUiSlider.on('change', (values,handle)=>{\r\n            var prices = this.state.prices\r\n            prices[handle] = values[handle]\r\n            sliderValues[handle].innerHTML = values[handle]\r\n            this.setState({...prices})\r\n\r\n        })\r\n    }\r\n\r\n    categoryOnChange = (e) => {\r\n        this.setState({selectedCategory: e.target.value})\r\n    }\r\n\r\n    sortOnChange = (e) => {\r\n        this.setState({selectedSort: e.target.value})\r\n    }\r\n\r\n    mapAdv = () => {\r\n\r\n        let {products} = this.props\r\n        let {prices} = this.state\r\n\r\n        products = products.filter(p => {\r\n            let price = p.price || ''\r\n            return price>=prices[0] && price<=prices[1]\r\n        })\r\n        if (this.state.selectedSort === 'price')\r\n            products = products.sort((a,b) => {\r\n                if (a.price > b.price)\r\n                    return 1\r\n\r\n                if (a.price < b.price)\r\n                    return -1\r\n\r\n                return 0\r\n            })\r\n        else if (this.state.selectedSort === 'rating')\r\n        products = products.sort((a,b)=>{\r\n            if( a.seller_rating < b.seller_rating )\r\n                return 1\r\n            if ( a.seller_rating > b.seller_rating )\r\n                return -1\r\n            return 0\r\n        }) \r\n        \r\n        if (this.state.selectedCategory !== \"any\"){\r\n            products = products.filter(p=>{\r\n                let category = p.category\r\n                return category === this.state.selectedCategory\r\n            })\r\n        }\r\n\r\n        return products.map((product, key)=><Advertisement /*addToFavourite = {this.props.addToFavourite}*/ product={product} key={key}/>)\r\n   }\r\n\r\n   render(){\r\n    return <section>\r\n        <Link to='/favourite'><i className=\"fa fa-heart\"></i></Link>\r\n        <header className=\"filter row\">\r\n            <form className=\"col s12\"> \r\n            <div className=\"input-field col s12 l6\" style={{marginTop: \"3.7rem\"}}>  \r\n                <label style={{position: \"absolute\", top: \"-68px\"}}>Цена</label>\r\n                <div id=\"priceSlider\"></div> \r\n\r\n                <div className=\"col s3 l2 left-align\">\r\n                    <span id=\"lower-price\"></span>\r\n                </div>\r\n                <div className=\"col s3 l2 offset-l8 offset-s6 right-align\">\r\n                    <span id=\"upper-price\"></span> \r\n                </div> \r\n            </div> \r\n\r\n            <div className=\"input-field col l3 s12\">\r\n   <select name=\"category\" \r\n        value={this.state.selectedCategory} \r\n        ref={node=>{this.select = node}} \r\n        onChange={this.categoryOnChange}>\r\n                    <option value=\"any\">любая категория</option>\r\n                    <option value=\"immovable\">недвижимость</option>\r\n                    <option value=\"cameras\">камеры</option>\r\n                    <option value=\"auto\">автомобили</option>\r\n                    <option value=\"laptops\">ноутбуки</option>\r\n                </select>\r\n                <label>Категория</label>\r\n            </div>   \r\n\r\n            <div className=\"input-field col s12 l3\">\r\n                <select name=\"sort\" value={this.state.selectedSort} onChange={this.sortOnChange}>\r\n                    <option value=\"rating\">по популярности</option>\r\n                    <option value=\"price\">по возрастанию цены</option>\r\n                </select>\r\n                <label>Сортировка</label>\r\n            </div>\r\n            </form>\r\n        </header>\r\n        <section className=\"advertisements container\">\r\n            {this.mapAdv()}\r\n        </section>\r\n    </section>\r\n   }\r\n}\r\n\r\n\r\nexport default AdvertisementsList\r\n","import React from 'react'\r\nimport Advertisement from './Advertisement'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nclass FavouriteAdverticement extends React.Component{\r\n    state = {products:[]}\r\n    componentWillMount = () => {\r\n        this.setState( { products: { ...localStorage } } )\r\n    }\r\n    renderFavAdv = () => {\r\n        let favourites = this.props.products.filter(p => this.props.favourites.includes(p.id))\r\n    \r\n        return favourites.map((f, i) => { return <Advertisement key={i} btnClass=\"btn-floating-favourite\" product={f} /> })\r\n    }\r\n    render(){\r\n        return  <div>\r\n            <Link to={process.env.PUBLIC_URL}><i className=\"fa fa-home\"></i></Link>\r\n            {this.renderFavAdv()}\r\n        </div>\r\n        \r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        favourites: state.advList.favourites\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps )(FavouriteAdverticement)","import React from 'react'\r\nimport '../App.css'\r\nimport 'materialize-css'\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport AdvertisementsList from './AdvertisementsList.js'\r\nimport FavouriteAdverticement from './FavouriteAdverticement.js'\r\nimport { Route, HashRouter } from 'react-router-dom'\r\nimport 'font-awesome/css/font-awesome.min.css'\r\n\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    products:[],\r\n    sellers:[]\r\n  }\r\n\r\n  componentWillMount(){\r\n    Promise.all(['https://my-json-server.typicode.com/darinapairel/avitotest/sellers', 'https://my-json-server.typicode.com/darinapairel/avitotest/products'].map(url => fetch(url).then(j => j.json()) )) //https://avito.dump.academy/products\r\n    .then(data=>{\r\n      \r\n      let sellers = data[0]\r\n      let products = data[1]\r\n      products = products.map(p => {\r\n        let seller = sellers.find(s => s.id === p.relationships.seller) || {name: '', rating: 0}\r\n        return {...p, seller_name: seller.name, seller_rating: seller.rating}\r\n      })\r\n\r\n      this.setState({...this.state, products, sellers})\r\n\r\n    })\r\n}\r\n  render(){\r\n    const {sellers, products} = this.state\r\n    const advList = () => <AdvertisementsList sellers={sellers} products={products}/>\r\n    const favAdv = () => <FavouriteAdverticement products={products}/>\r\n  return (\r\n    <div className=\"App container\">\r\n      <HashRouter basename={process.env.PUBLIC_URL}>\r\n      <div>\r\n        <Route exact path=\"/\" component={advList}/>\r\n        <Route exact path='/favourite' component={favAdv}/>        \r\n      </div>\r\n      </HashRouter> \r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default App;\r\n","import * as adverticementActions from '../actions/advericementAction'\r\n\r\nlet localFavourites = localStorage.getItem('favourites')\r\n\r\nif (!localFavourites){\r\n    localStorage.setItem('favourites', [])\r\n} else{\r\n    localFavourites = JSON.parse(localFavourites)\r\n}\r\n\r\nconst initialState = {\r\n    favourites: localFavourites\r\n}\r\n\r\nconst advList = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case adverticementActions.ADD_FAVOURITE:\r\n\r\n            const {id} = action.payload\r\n            const idx = state.favourites.findIndex(f => f === id)\r\n            const favourites = idx === -1 ? [...state.favourites, id] : state.favourites\r\n            \r\n            localStorage.setItem('favourites', JSON.stringify(favourites))\r\n\r\n            return {...state, favourites}\r\n\r\n        default: return state    \r\n    }\r\n   \r\n}\r\n\r\nexport default advList\r\n","import { combineReducers } from 'redux'\r\nimport advList from './adverticementReducer'\r\n\r\nconst mainReducer = combineReducers({advList})\r\n\r\nexport default mainReducer","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { createStore } from 'redux'\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport mainReducer from './reducers';\r\n\r\n\r\nconst store = createStore(mainReducer, {advList: {favourites: []}})\r\nReactDOM.render(\r\n    <Provider store= {store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}